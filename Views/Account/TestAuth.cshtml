@{
    ViewData["Title"] = "–¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏";
}

<h2>üîê –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</h2>

@if (User.Identity != null && User.Identity.IsAuthenticated)
{
    <h3>–ü—Ä–∏–≤–µ—Ç, @User.Identity.Name!</h3>

    <p>
        –í–∞—à–∞ —Ä–æ–ª—å:
        @if (User.IsInRole("Admin")) { <b>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</b> }
        else if (User.IsInRole("Moderator")) { <b>–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</b> }
        else if (User.IsInRole("User")) { <b>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</b> }
        else { <b>–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è</b> }
    </p>

    <form method="post" asp-action="Logout">
        <button type="submit">üö™ –í—ã–π—Ç–∏</button>
    </form>
}
else
{
    <div style="display:flex; gap:50px;">
        <div>
            <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
            <form method="post" asp-action="Register">
                <label>–õ–æ–≥–∏–Ω:</label><br />
                <input type="text" name="username" required /><br />

                <label>–ü–∞—Ä–æ–ª—å:</label><br />
                <input type="password" name="password" required /><br />

                <label>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:</label><br />
                <input type="password" name="confirmPassword" required /><br />

                <label>–ò–º—è:</label><br />
                <input type="text" name="displayName" required /><br />

                <label>–û—Ç–¥–µ–ª:</label><br />
                <select name="departmentId">
                    @foreach (var dep in ViewBag.Departments)
                    {
                        <option value="@dep.Id">@dep.Name</option>
                    }
                </select><br />

                <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </form>
        </div>

        <div>
            <h3>–í—Ö–æ–¥</h3>
            <form method="post" asp-action="Login">
                <label>–õ–æ–≥–∏–Ω:</label><br />
                <input type="text" name="username" required /><br />

                <label>–ü–∞—Ä–æ–ª—å:</label><br />
                <input type="password" name="password" required /><br />

                <button type="submit">–í–æ–π—Ç–∏</button>
            </form>
        </div>
    </div>
}

@if (ViewBag.Error != null)
{
    <p style="color:red">@ViewBag.Error</p>
}
@if (ViewBag.Message != null)
{
    <p style="color:green">@ViewBag.Message</p>
}
